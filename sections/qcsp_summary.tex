\documentclass[../main.tex]{subfiles}

\makeatletter
\@ifundefined{fromRoot}{%
  \newcommand{\fromRoot}[1]{../#1}
  
  \usepackage{xr}
  \externaldocument{../main}
}{}

\def\input@path{{\subfix{../}}}
%or: \def\input@path{{/path/to/folder/}{/path/to/other/folder/}}
\makeatother

\graphicspath{
  {\subfix{../}}
  {\subfix{./figures}}
  {\subfix{../figures}}
  {\subfix{./figures/logos-thesis/}}
  {\subfix{../figures/logos-thesis/}}
  {\subfix{./figures/rtexps-pics/}}
  {\subfix{../figures/rtexps-pics/}}
}


\hypersetup{
    pdfauthor   = {Camille MONIÈRE},
    pdftitle    = {Th\`{e}se (Présentation: QCSP, un résumé)},
    pdfsubject  = {Th\`{e}se (Présentation: QCSP, un résumé)},
%    pdfkeywords = {mots-cl\'{e}s},
}

\begin{document}

\section[Système de communications QCSP]{Système de communications \acrshort{qcsp}}


\subsection{Modèle}

\begin{frame}{\secname : \subsecname}
  \begin{overlayarea}{\linewidth}{0.25\textheight}
    \resizebox{\linewidth}{!}{
      \input{figures/tikzinput/evolutive_chain.tex}
    }
  \end{overlayarea}

  \vspace{1 em}
  \begin{columns}
    \begin{column}{.3\linewidth}
      \begin{overlayarea}{\linewidth}{0.6\textheight}
        \only<1->{\hfill Message $\vect{M}$\\} \vspace{.25em}
        \only<1->{\hfill Mot de code $\vect{C}$\\} \vspace{.25em}
        \only<2->{\hfill Trame CCSK $\vect{F}_{\mathrm{CCSK}}$\\} \vspace{.25em}
        \only<3->{\hfill Trame QPSK $\vect{F}$\\} \vspace{.25em}
        \only<4->{\hfill Flux d'échantillons $y(n)$\\} \vspace{.25em}
        \only<6->{\hfill Trame détecté $\vect{F}_{D}$\\} \vspace{.25em}
        \only<7->{\hfill Trame synchronisation $\vect{F}_{S}$\\} \vspace{.25em}
        \only<8->{\hfill Message décodé $\vect{M}'$}
      \end{overlayarea}
    \end{column}
    \begin{column}{.7\linewidth}
      \begin{overlayarea}{\linewidth}{0.6\textheight} \centering
        \only<1->{$\{1, \: 2, \: 1\}$\\} \vspace{.25em}
        \only<1->{$\{1, \: 2, \: 1, \: 3, \: 2, \: 3\}$\\} \vspace{.25em}
        \only<2->{\includegraphics[width=\linewidth, height=.73em, keepaspectratio = true]{figures/tikzpicture/trame_ccsk.pdf}\\} \vspace{.25em}
        \only<3->{\includegraphics[width=\linewidth, height=.73em, keepaspectratio = true]{figures/tikzpicture/trame_qcsp.pdf}\\} \vspace{.25em}
        \only<4->{\includegraphics[width=\linewidth, height=.73em, keepaspectratio = false]{figures/rtexps-pics/noise.png}\\} \vspace{.25em}
        \only<6->{\includegraphics[width=\linewidth, height=1.05em, keepaspectratio = true]{figures/tikzpicture/trame_detectee.pdf}\\} \vspace{.25em}
        \only<7->{\includegraphics[width=\linewidth, height=1.05em, keepaspectratio = true]{figures/tikzpicture/trame_synchro.pdf}\\} \vspace{.25em}
        \only<8->{$\{1, \: 2, \: 1\}$}
      \end{overlayarea}
    \end{column}
  \end{columns}
\end{frame}

\subsection{Émission : fonctionnellement simple}

\begin{frame}{\subsecname}
  \begin{columns}
    \begin{column}{.35\linewidth}
      \begin{overlayarea}{\linewidth}{.5\textheight}
        \centering
        \includegraphics[width=\linewidth, height=.5\textheight, keepaspectratio = true]{figures/tikzpicture/ccsk_simd_stdl.pdf}
        \captionof{figure}{Modulation CCSK, en image.}
      \end{overlayarea}
    \end{column}
    \begin{column}{.35\linewidth}
      \begin{overlayarea}{\linewidth}{.5\textheight}
        \centering
        \includegraphics[width=\linewidth, height=.55\textheight, keepaspectratio = true]{figures/tikzpicture/ovmod_simd_stdl.pdf}
        \captionof{figure}{Surmodulation, en image.}
      \end{overlayarea}
    \end{column}
  \end{columns}

  \vspace{4 em}

  \begin{center}
    Le NB-LDPC et le filtre sont des fonctions très étudiées dans la littérature.
  \end{center}
\end{frame}

\subsection{Détection}

\begin{frame}{\subsecname~basée sur la CCSK}
  \begin{columns}
    \begin{column}{.6\linewidth}
      \begin{overlayarea}{\linewidth}{.75\textheight}
        Estimation d'un ``score'' de détection, en utilisant les propriétés de la \acrshort{ccsk}. On ``\emph{estime}'' à quel point chaque ``\emph{symbole}'' de $q$ chips ressemble à \pn{0} \dots

        \ra{.5}
        \begin{center}
          % \begin{noindent}
        \begin{tabular}{@{}r c@{}l@{}l@{}}
          ${M_n} = $ & $\mathrm{max}(\mathrm{abs}($ &
          \begin{tabular}{@{}c@{}}
              $\mgb{} \pta{} \mgb{} \pta{} \mgb{} \pta{} \mgb{}$ \\
              $\times + \times + \times + \times$                \\
              $\mXb{} \pta{} \mXb{} \pta{} \mXb{} \pta{} \mOb{}$
            \end{tabular} & $)) = \mathrm{max}(|\vect{L}_n|)$
        \end{tabular}
        % \end{noindent}
          \ra{1} \vspace{1 em}

          \resizebox{\linewidth}{!}{
            \input{figures/tikzinput/detect_trame.tex}
          }
        \end{center}
      \end{overlayarea}
    \end{column}
    \begin{column}{.4\linewidth}
      \centering
      \resizebox{\linewidth}{!}{
        \input{figures/tikzinput/detect_graphs.tex}
      }
    \end{column}
  \end{columns}
\end{frame}

\begin{frame}{Accumulation d'information au niveau trame}
  \begin{columns}
    \begin{column}{.5\linewidth}
      \dots~et on les accumule sur la durée d'une ``trame'' de taille $N$ (ici $N = 6$). On compare le résultat à un seuil de détection $U_0$.
      \begin{center}
        $S_n = \sum_{i = 0}^{N - 1}\:M_{n - i \times q}$

        \resizebox{.6\linewidth}{!}{
          \input{figures/tikzinput/detect_graphs_score.tex}
        }
      \end{center}
    \end{column}
    \begin{column}{.5\linewidth}
      \centering
      \resizebox{\linewidth}{!}{
        \input{figures/tikzinput/detect_graphs_scoreres.tex}
      }
    \end{column}
  \end{columns}
\end{frame}

\begin{frame}{\subsecname : {Principe}}
  \begin{center}
    \includegraphics[
      width=\linewidth,
      height=.4\textheight,
      keepaspectratio=true
    ]{figures/tikzpicture/score_proc_unit_legacy_stripped.pdf}
  \end{center}
  \begin{columns}
    \begin{column}{.5\linewidth}
      \centering
      \begin{itemize}
        \item [1.] calcul des corrélations circulaires,
        \item [2.] extraction du maximum en valeur absolue,
        \item [3.] accumulation sur la durée de la dernière ``trame'' de $N \times q$ chips.
      \end{itemize}
    \end{column}
    \begin{column}{.5\linewidth}
      \centering
      \begin{align*}
        \text{Corrélation } & :\quad & \vect{L}_n = & \:\vect{y}_n \star \mpn{0}                 \\
        \text{Max. absolu } & :\quad & M_n =        & \:\mathrm{max}(|\vect{L}_n|)               \\
        \text{Score }       & :\quad & S_n =        & \:\sum_{i = 0}^{N - 1}\:M_{n - i \times q}
      \end{align*}
    \end{column}
  \end{columns}
\end{frame}

% \begin{frame}{\subsecname : {animation CCSK demod}}
%   \begin{center}
%     \textcolor{RoyalBlue}{TODO}
%   \end{center}
% \end{frame}

\begin{frame}{\subsecname : {Problèmes Temps Fréquence}}
  \begin{columns}
    \begin{column}{.4\linewidth}
      \begin{ctrlitemize}{6pt}
        \item Les imprécisions d'horloges et l'effet Doppler introduisent des \textbf{erreurs de fréquences}, résultent en une \textbf{rotation du signal entrant}.
        \item Le calcul de \textbf{chaque} valeur de score pour \textbf{chaque} chip accroit la complexité calculatoire.
      \end{ctrlitemize}
    \end{column}
    \begin{column}{.6\linewidth}
      \centering
      \includegraphics[width=\linewidth, height=.75\textheight, keepaspectratio=true]{figures/pgfplots/score_function_stdl.pdf}
    \end{column}
  \end{columns}
\end{frame}

\begin{frame}{\subsecname : {La grille temps fréquences}}
  \begin{columns}
    \begin{column}{.6\linewidth}
      \begin{ctrlitemize}{6pt}
        \item Ouverture d'une fenêtre de détection, de taille $\textcolor{Red}{\mpd} \times \textcolor{Blue}{\mpo}$.
        \item Calcul de $\textcolor{Red}{\mpd}$ valeurs de scores tous les $q$ chips : $\searrow$ de la complexité, $\searrow$ de performances de détection.
        \item Calcul de $\textcolor{Blue}{\mpo}$ valeurs de scores sur un intervalle arbitraire (ex: $2\pi$) : $\nearrow$ des performances de détection, $\nearrow$ de la complexité.
      \end{ctrlitemize}
    \end{column}
    \begin{column}{.4\linewidth}
      \centering
      \includegraphics[width=\linewidth, height=.85\textheight, keepaspectratio=true]{figures/pgfplots/score_grid.pdf}
    \end{column}
  \end{columns}
\end{frame}

\begin{frame}{\subsecname : {Modèle fonctionnel}}
  \begin{center}
    \includegraphics[
      width=.75\linewidth,
      height=.35\textheight,
      keepaspectratio=true
    ]{figures/tikzpicture/score_proc_unit_legacy_stdl.pdf}

    \vspace{1em}

    \includegraphics[
      width=.9\linewidth,
      height=.4\textheight,
      keepaspectratio=true
    ]{figures/tikzpicture/funct_view_detection_stdl.pdf}
  \end{center}
\end{frame}

\begin{frame}{\subsecname : {Effets des paramètres $p_\Delta$ et $p_\omega$}}{Données réelles avec $q = 64$ et $N = 60$}
  \begin{overlayarea}{\linewidth}{.15\textheight} \vspace {-1.2cm}
    \hfill \includegraphics[width=6.5cm, height=.75\textheight, keepaspectratio=true]{figures/tikzpicture/funct_view_detection_stdl.pdf}
  \end{overlayarea}
  \begin{columns}
    \begin{column}{.65\linewidth}
      \begin{overlayarea}{\linewidth}{.75\textheight} \vspace {-.5cm}
        \includegraphics[width=\linewidth]{pgfplots/roc_curves_stdl.pdf}
      \end{overlayarea}
    \end{column}
    \begin{column}{.35\linewidth} \vspace {-.5cm}
      \includegraphics[width=\linewidth]{pgfplots/popw_maps_m10dB_60x64_stdl.pdf}
    \end{column}
  \end{columns}
\end{frame}

% \subsection{Synchronisation et décodage}

% \begin{frame}{\subsecname}
%   \begin{center}
%     \textcolor{RoyalBlue}{TODO --- En fonction du temps, détails ou pas}
%   \end{center}
% \end{frame}

% \subsection{Décodage}

% \begin{frame}{\subsecname}
%   \begin{center}
%     \textcolor{RoyalBlue}{TODO --- Merci CCSK et hop}
%   \end{center}
% \end{frame}

\end{document}
